{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Layout from '../components/Layout';\nimport Fetch from 'isomorphic-unfetch';\nimport Price from '../components/Prices'; // const rp = require('request-promise');\n// import rp from 'request-promise'\n\nfunction App(props) {\n  var _useState = useState({\n    hits: []\n  }),\n      data = _useState[0],\n      setData = _useState[1];\n\n  return __jsx(Layout, null, __jsx(\"div\", null, __jsx(\"h1\", null, \" Welcome to Bitzprice\"), __jsx(\"p\", null, \"Check current Bitcoin Repo Rate: \"), __jsx(Price, {\n    bpi: props.bpi,\n    cmc: props.cmc\n  })));\n}\n\nApp.getInitialProps = function _callee() {\n  var res, data, apiKey, url, qString, res2, data2;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(fetch('https://api.coindesk.com/v1/bpi/currentprice.json'));\n\n        case 2:\n          res = _context.sent;\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(res.json());\n\n        case 5:\n          data = _context.sent;\n          apiKey = 'f2b2d0f3-dc44-4a31-86b2-f851da69ac54';\n          url = \"https://pro-api.coinmarketcap.com/v1/cryptocurrency/listings/latest\", qString = \"?CMC_PRO_API_KEY=\" + apiKey + \"&sort=market_cap&start=1&cryptocurrency_type=tokens\";\n          _context.next = 10;\n          return _regeneratorRuntime.awrap(fetch(url + qString, {\n            mode: \"no-cors\"\n          }));\n\n        case 10:\n          res2 = _context.sent;\n          _context.next = 13;\n          return _regeneratorRuntime.awrap(res2.json());\n\n        case 13:\n          data2 = _context.sent;\n          console.log(data2.data[0]);\n          return _context.abrupt(\"return\", {\n            bpi: data.bpi,\n            cmc: data2\n          });\n\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexport default App;","map":null,"metadata":{},"sourceType":"module"}